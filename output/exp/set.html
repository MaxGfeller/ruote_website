<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <title>ruote - set expression</title>
    <script src='/js/shCore.js'></script>
    <script src='/js/shBrushRuby.js'></script>
    <script src='/js/shBrushJScript.js'></script>
    <script src='/js/shBrushXml.js'></script>
    <link href='/css/reset.css' rel='stylesheet' type='text/css' />
    <link href='/css/shCore.css' rel='stylesheet' type='text/css' />
    <link href='/css/shThemeDefault.css' rel='stylesheet' type='text/css' />
    <link href='/css/ruote.css' rel='stylesheet' type='text/css' />
  </head><body>
    <div id='container'>
      <div id='header'>
        <div id='header-top'>
          <div id='header-left'>
            <a href='/'>
              <img align='left' src='/images/ruote.png' />
              <span id='ruote' onclick="location.href = '/'; return true;">
                ruote 2.1
              </span>
            </a>
          </div>
          <div id='header-right'>
          </div>
        </div>
        <div id='header-bottom'>
          <div id='header-subtitle'>
            open source ruby workflow engine
          </div>
          <div id='header-menu'>
            <a href='documentation.html' title='documentation'>doc</a>
            <a href='source.html' title='source code'>source</a>
            <a href='download.html' title='download'>download</a>
            <a href='lists.html' title='mailing lists and irc'>lists</a>
            <a href='http://jmettraux.wordpress.com' title='blog'>blog</a>
            <a href='map.html' title='map'>map</a>
            <a class='nihongo' href='ja.html' title='日本語'>日本語</a>
          </div>
        </div>
      </div>
      <div id='content'>
        <h2>set</h2>
        <p>Setting a workitem field or a process variable.</p>
        <pre class="brush: ruby">
          sequence do
            set :field =&gt; 'subject', :value =&gt; 'food and beverage'
            set :field =&gt; 'date', :val =&gt; 'tomorrow'
            participant :ref =&gt; 'attendees'
          end
        </pre>
        <p>:field can be abbreviated to :f or :fld. :variable can be abbreviated to<br />
        :v or :var. Likewise, :val and :value are interchangeable.</p>
        <h3>field_value, variable_value</h3>
        <p>Usually, grabbing a value from a field or a value will look like</p>
        <pre class="brush: ruby">
          set :f =&gt; 'my_field', :value =&gt; '${v:my_variable}'
        </pre>
        <p>But doing those ${} substitutions always result in a string result. What<br />
        if the variable or the field holds a non-string value ?</p>
        <pre class="brush: ruby">
          set :f =&gt; 'my_field', :var_value =&gt; 'my_variable'
        </pre>
        <p>Is the way to go then. &#8216;set&#8217; understands v_value, var_value, variable_value<br />
        and f_value, fld_value and field_value.</p>
        <h3>:escape</h3>
        <p>If the value to insert contains ${} stuff but this has to be preserved,<br />
        setting the attribute :escape to true will do the trick.</p>
        <pre class="brush: ruby">
          set :f =&gt; 'my_field', :value =&gt; 'oh and ${whatever}', :escape =&gt; true
        </pre>
        <h3>ruote 2.0&#8217;s shorter form</h3>
        <p>Ruote 2.0 introduces a shorter form for the &#8216;set&#8217; expression :</p>
        <pre class="brush: ruby">
          sequence do
            set :field =&gt; 'f', :value =&gt; 'val0'
            set :variable =&gt; 'v', :value =&gt; 'val1'
            set :field =&gt; 'f_${v:v}', :value =&gt; 'val2'
          end
        </pre>
        <p>can be rewritten as</p>
        <pre class="brush: ruby">
          sequence do
            set 'f:f' =&gt; 'val0'
            set 'v:v' =&gt; 'val1'
            set 'f:f_${v:v}' =&gt; 'val2'
          end
        </pre>
        <p>since &#8216;f:&#8217; is the default for the &#8216;dollar notation&#8217;, the shortest form<br />
        becomes</p>
        <pre class="brush: ruby">
          sequence do
            set 'f' =&gt; 'val0'
            set 'v:v' =&gt; 'val1'
            set 'f_${v:v}' =&gt; 'val2'
          end
        </pre>
      </div>
      <div id='footer'>
        <div id='footer-left'>
          this website was created with
          <a href='http://nanoc.stoneship.org'>nanoc</a>
          and
          <a href='http://alexgorbatchev.com/SyntaxHighlighter/'>syntax highlighter</a>
        </div>
        <div id='footer-right'>
          &copy; 2005-2010 the ruote team
        </div>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        SyntaxHighlighter.all();
      //]]>
    </script>
    <script src='http://www.google-analytics.com/ga.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        if (location.hostname != 'localhost' && location.hostname != '127.0.0.1') {
          var pageTracker=_gat._getTracker('UA-138748-2');
          pageTracker._initData();
          pageTracker._trackPageview();
        }
      //]]>
    </script>
  </body>
</html>
